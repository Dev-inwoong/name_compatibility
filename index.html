<!DOCTYPE html>
<!-- saved from url=(0149)file:///private/var/folders/cm/xgn7y25n4zld3qdhhd8pqp0c0000gn/T/remote-file-preview-B0963D15-0D02-4C1D-912E-DCB3FB8206CB/name_compatibility_game.html -->
<html lang="ko"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <!-- Ensure proper scaling on mobile devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
<title>이름 궁합 계산기</title>
<style>
  /* Import Galmuri font from jsDelivr for a retro look */
  @font-face {
    font-family: 'Galmuri';
    src: url('https://cdn.jsdelivr.net/npm/galmuri@latest/dist/Galmuri11.woff2') format('woff2');
    font-weight: normal;
    font-style: normal;
  }
  body {
    /* Use the imported Galmuri font with a monospace fallback for a retro feel */
    font-family: 'Galmuri', monospace;
    /* Set a dark page background as fallback and use the provided image */
    background: #121212 url('https://i.postimg.cc/0283V4h2/IMG-6326.jpg') no-repeat center center fixed;
    background-size: contain;
    color: #fafafa;
    padding: 20px;
    /* Center the main container both horizontally and vertically */
    display: flex;
    justify-content: center;
    align-items: start;
    min-height: 100vh;
    position: relative;
  }

  /* Dark overlay over the background image */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 0;
  }
  #game-container {
    max-width: 500px;
    /* Remove auto margins so flexbox can fully control centering */
    margin: 0;
    position: relative;
    z-index: 1;
    background: #1e1e1e;
    padding: 20px;
    border: 2px solid #00c864;
    border-radius: 4px;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
  }
  input[type="text"] {
    width: calc(100% - 20px);
    margin: 5px 0 10px;
    padding: 10px;
    font-size: 16px;
    border: 2px solid #00c864;
    border-radius: 2px;
    background: #2b2b2b;
    color: #fafafa;
  }
  button {
    width: 100%;
    padding: 10px;
    font-size: 16px;
    background: #00c864;
    color: #121212;
    border: 2px solid #00c864;
    border-radius: 2px;
    cursor: pointer;
    font-family: 'Galmuri', monospace;
  }
  button:hover {
    background: #00a954;
    border-color: #00a954;
  }
  #result {
    margin-top: 20px;
    font-size: 24px;
    font-weight: bold;
    text-align: center;
    color: #00c864;
  }

  /* Animated step styles with connecting lines */
  .step {
    position: relative;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease, transform 0.6s ease;
    margin-top: 10px;
    font-size: 18px;
    padding-left: 20px;
    border-left: 2px solid #00c864;
  }
  .step.show {
    opacity: 1;
    transform: translateY(0);
  }
  /* Draw a connecting line from each step to the next */
  .step:not(:last-child)::after {
    content: '';
    position: absolute;
    left: -2px;
    top: 100%;
    width: 2px;
    height: 20px;
    background: #00c864;
  }

  /* Responsive styles for mobile devices */
  @media (max-width: 600px) {
    body {
      padding: 10px;
    }
    #game-container {
      width: 100%;
      padding: 15px;
    }
    input[type="text"] {
      font-size: 14px;
      padding: 8px;
    }
    button {
      font-size: 14px;
      padding: 8px;
    }
    #result {
      font-size: 20px;
    }
    .step {
      font-size: 16px;
      padding-left: 15px;
    }
    .step:not(:last-child)::after {
      height: 15px;
    }
  }
</style>
</head>
<body>
  <div id="game-container">
    <h1>이름 궁합 계산기</h1>
    <p>두 사람의 이름을 입력하세요. 한글 글자의 획수에 따라 궁합을 계산합니다.</p>
    <input id="name1" type="text" placeholder="첫 번째 이름 (예: 전뿡뿡)">
    <input id="name2" type="text" placeholder="두 번째 이름 (예: 황뿡뿡)">
    <button type="button" onclick="calculate()">궁합 계산</button>
    <div id="result"></div>
    <div id="steps"></div>
  </div>
<script>
// Hangul stroke mapping for consonants and vowels.  
// 일부 겹받침과 쌍자음까지 모두 포함합니다.  
const consonantStrokes = {
  "ㄱ": 1, "ㄴ": 1, "ㅇ": 1,
  "ㄷ": 2, "ㅅ": 2, "ㅈ": 2, "ㅋ": 2, "ㄲ": 2,
  "ㄹ": 3, "ㅁ": 3, "ㅊ": 3, "ㅌ": 3, "ㅎ": 3,
  "ㅂ": 4, "ㅍ": 4, "ㄸ": 4, "ㅆ": 4, "ㅉ": 4,
  // 쌍비읍의 경우 일반적으로 비읍과 동일한 획수로 취급합니다.
  "ㅃ": 4
};
const vowelStrokes = {
  "ㅡ": 1, "ㅣ": 1,
  "ㅓ": 2, "ㅏ": 2, "ㅜ": 2, "ㅗ": 2,
  "ㅑ": 3, "ㅕ": 3, "ㅛ": 3, "ㅠ": 3, "ㅐ": 3, "ㅔ": 3, "ㅚ": 3, "ㅟ": 3,
  "ㅘ": 4, "ㅝ": 4, "ㅒ": 4, "ㅖ": 4, "ㅢ": 4,
  "ㅙ": 5, "ㅞ": 5
};

// 배열로 한글 음절을 초성, 중성, 종성으로 분리하기 위한 표.
const CHO_LIST = ["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"];
const JUNG_LIST = [
  "ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"
];
const JONG_LIST = [
  "",
  "ㄱ", "ㄲ", "ㄳ", "ㄴ", "ㄵ", "ㄶ", "ㄷ", "ㄹ", "ㄺ", "ㄻ", "ㄼ", "ㄽ", "ㄾ", "ㄿ", "ㅀ",
  "ㅁ", "ㅂ", "ㅄ", "ㅅ", "ㅆ", "ㅇ", "ㅈ", "ㅊ", "ㅋ", "ㅌ", "ㅍ", "ㅎ"
];

// 기본 자모의 획수 추출 함수. 매핑된 값이 없으면 0을 반환합니다.
function getBasicStroke(jamo) {
  if (consonantStrokes[jamo] !== undefined) {
    return consonantStrokes[jamo];
  }
  if (vowelStrokes[jamo] !== undefined) {
    return vowelStrokes[jamo];
  }
  return 0;
}

// 한글 음절의 전체 획수를 계산합니다.  
// 음절을 초성, 중성, 종성으로 분리하여 각각의 획수를 합산합니다.  
function getStroke(char) {
  const code = char.codePointAt(0);
  // 한글 음절 블록 범위: U+AC00 ~ U+D7A3  
  if (code < 0xAC00 || code > 0xD7A3) {
    // 자모 단독 또는 한글 외 문자는 바로 기본 획수를 반환합니다.
    return getBasicStroke(char);
  }
  const index = code - 0xAC00;
  const choIndex = Math.floor(index / 588);
  const jungIndex = Math.floor((index % 588) / 28);
  const jongIndex = index % 28;
  const choChar = CHO_LIST[choIndex];
  const jungChar = JUNG_LIST[jungIndex];
  const jongStr = JONG_LIST[jongIndex];
  let total = 0;
  total += getBasicStroke(choChar);
  total += getBasicStroke(jungChar);
  // 종성(받침)은 공백이거나 겹받침일 수 있으므로 각 문자에 대해 획수를 더합니다.
  for (const c of jongStr) {
    total += getBasicStroke(c);
  }
  return total;
}

// Helper to delay execution for a given milliseconds. This is kept for potential future use.
function delay(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

// Display a step with animation.
function displayStep(container, text) {
  const stepEl = document.createElement('div');
  stepEl.className = 'step';
  stepEl.textContent = text;
  container.appendChild(stepEl);
  // Trigger transition after adding to DOM.
  requestAnimationFrame(() => {
    stepEl.classList.add('show');
  });
}

// Calculate compatibility with step-by-step animation.
function calculate() {
  const resultEl = document.getElementById("result");
  const stepsContainer = document.getElementById("steps");
  resultEl.innerText = '';
  stepsContainer.innerHTML = '';
  const name1 = document.getElementById("name1").value.trim();
  const name2 = document.getElementById("name2").value.trim();
  if (!name1 || !name2) {
    resultEl.innerText = "이름을 모두 입력해주세요.";
    return;
  }
  // Step 1: interleave the names.
  const interleaved = [];
  const maxLen = Math.max(name1.length, name2.length);
  for (let i = 0; i < maxLen; i++) {
    if (i < name1.length) interleaved.push(name1[i]);
    if (i < name2.length) interleaved.push(name2[i]);
  }
  // Step 2: show stroke counts.
  let strokes = interleaved.map(ch => getStroke(ch));
  // Collect messages for each stage.
  const messages = [];
  messages.push(interleaved.join(' '));
  messages.push(strokes.join(' '));
  // Step 3: iterate until two numbers remain and record messages.
  let round = 1;
  let tempStrokes = strokes.slice();
  while (tempStrokes.length > 2) {
    const next = [];
    for (let i = 0; i < tempStrokes.length - 1; i++) {
      next.push((tempStrokes[i] + tempStrokes[i+1]) % 10);
    }
    tempStrokes = next;
    messages.push(tempStrokes.join(' '));
    round++;
  }
  // Calculate final result string and remove leading zeros.
  const finalResultStr = tempStrokes.join('');
  const percentValue = parseInt(finalResultStr, 10).toString();
  messages.push(`최종 결과: ${percentValue}%`);
  // Display messages sequentially using setTimeout.
  let idx = 0;
  function showNext() {
    if (idx < messages.length) {
      displayStep(stepsContainer, messages[idx]);
      idx++;
      // Show next message after 800 milliseconds.
      setTimeout(showNext, 800);
    } else {
      // When all messages are shown, update the result text.
      resultEl.innerText = `이름 궁합: ${percentValue}%`;
    }
  }
  showNext();
}
</script>


</body></html>
